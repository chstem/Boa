{% extends "layout.html" %}
{% block body %}

<div class="container">
    <center>
        <h1>{{ conference_acronym+' '+year }} - Abstracts Overview</h1>
    </center>
</div>

<div class="container">
<form action="{{ url_for('manage_abstracts.show', action='filter') }}" method="post" class="form-horizontal" role="form">

    {{ form.hidden_tag() }}
    {{ form.btest(class='btest') }}

    <div class="container">

        <!-- filter -->
        <div class="row">
            <div class="col-sm-8">
                {{ formhelpers.render_field(form.filter_text, col0=2) }}
            </div>
            <div class="col-sm-4">
                {{ formhelpers.render_field(form.filter_field, col0=5) }}
            </div>
        </div>
        <div class="row">
            <div class="col-sm-3">
                {{ formhelpers.render_field(form.filter_contribution, col0=6) }}
            </div>
            <div class="col-sm-3">
                {{ formhelpers.render_field(form.filter_submitted, col0=6) }}
            </div>
            <div class="col-sm-3">
                {{ formhelpers.render_field(form.sort_by, col0=4) }}
            </div>
            <div class="col-sm-2">
                {{ formhelpers.render_checkbox(form.sort_reverse, inline=True) }}
            </div>
            <div class="col-sm-1">
                <button type="submit" class="btn btn-primary" formaction="{{ url_for('manage_abstracts.show', action='filter') }}">Filter</button>
            </div>
        </div>

        <br />
        <br />

        <div class="row">
            <div class="col-sm-10">
                <h4 class="text-center">total: {{ form.abstracts|length }}</h4>
            </div>
            <div class="col-sm-2 center-block">
                <button type="submit" class="btn btn-primary" formaction="{{ url_for('manage_abstracts.show', action='save') }}">Save</button>
            </div>
        </div>

        <!-- table head -->
        <div class="row">
            <label class="col-sm-1">ID</label>
            <label class="col-sm-1">Label</label>
            <label class="col-sm-1">Time</label>
            <label class="col-sm-1">Session</label>
            <label class="col-sm-2">Participant</label>
            <label class="col-sm-2">Title</label>
            <label class="col-sm-2">Category</label>
            <label class="col-sm-1">Contribution</label>
            <label class="col-sm-1"></label>
        </div>

        <br />
        <br />

        <!-- table data -->
        {% for abstract in form.abstracts %}

            <div class="row">
                <div class="col-sm-1">
                    {{ formhelpers.render_field(abstract.ID, hide_label=True, wrapped=False, readonly=True) }}
                </div>
                <div class="col-sm-1">
                    {{ formhelpers.render_field(abstract.Label, hide_label=True, wrapped=False, readonly=False) }}
                </div>
                <div class="col-sm-1">
                    {{ formhelpers.render_field(abstract.time_slot, hide_label=True, wrapped=False, readonly=False) }}
                </div>
                <div class="col-sm-1">
                    {{ formhelpers.render_field(abstract.session, hide_label=True, wrapped=False, readonly=False) }}
                </div>
                <div class="col-sm-2">
                    {{ formhelpers.render_field(abstract.participant, hide_label=True, wrapped=False, readonly=True) }}
                </div>
                <div class="col-sm-2">
                    {{ formhelpers.render_field(abstract.title, hide_label=True, wrapped=False, readonly=True) }}
                </div>
                <div class="col-sm-2">
                    {{ formhelpers.render_field(abstract.category, hide_label=True, wrapped=False) }}
                </div>
                <div class="col-sm-1">
                    {{ formhelpers.render_field(abstract.contribution, hide_label=True, wrapped=False) }}
                </div>
                <div class="col-sm-1">
                    {{ formhelpers.render_checkbox(abstract.submitted, hide_label=False, wrapped=False, disabled=True) }}
                </div>
            </div>

        {% endfor %}

        <div class="row">
            <div class="col-sm-10">
                <h4 class="text-center">total: {{ form.abstracts|length }}</h4>
            </div>
            <div class="col-sm-2 center-block">
                <button type="submit" class="btn btn-primary" formaction="{{ url_for('manage_abstracts.show', action='save') }}">Save</button>
            </div>
        </div>

    </div>

</form>
</div>

{% endblock %}
